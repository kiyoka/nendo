;;-*- mode: nendo; syntax: scheme -*-;;

;; -----------------
(enable-idebug)
(disable-idebug)
(define debug-print-length 256)


(define begin0
  (macro body
    (if (null? body)
        '(begin
           #f)
        (let1 result (gensym)
          `(receive ,result ,(car body)
             ,@(cdr body)
             (apply values ,result))))))

(macroexpand-1
 '(begin0
    (values 1 2)
    2
    3))

(receive (a b)
    (begin0
      (values 1 2)
      2
      3)
  (cons a b))


            
